<!doctype html>
<html lang="pt-br">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>WYWatch ‚Ä¢ Surpreenda-me</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;800&family=Inter:wght@400;600&display=swap" rel="stylesheet">

<style>
  :root{
    --bg-a:#060913; --bg-b:#0b1430;
    --blue:#3b82f6; --blue2:#60a5fa; --white:#f5faff;
    --border:rgba(255,255,255,.16);
    --warp-duration:1400ms;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;color:var(--white);
    font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu;
    background:
      radial-gradient(120% 120% at 20% 0%, var(--bg-b) 0%, var(--bg-a) 45%),
      radial-gradient(140% 120% at 80% 15%, #081126 0%, var(--bg-b) 55%);
    overflow:hidden;
  }

  /* energia sutil de fundo */
  .bursts{position:fixed;inset:0;pointer-events:none;z-index:0}
  .burst{
    position:absolute;inset:-40vmax;mix-blend-mode:screen;opacity:.28;
    background:conic-gradient(from 90deg,
      rgba(96,165,250,0) 0deg,
      rgba(96,165,250,.25) 36deg,
      rgba(59,130,246,.35) 84deg,
      rgba(96,165,250,0) 120deg);
    filter:blur(38px) saturate(140%); border-radius:50%;
    animation:spin 36s linear infinite;
  }
  .burst.b2{opacity:.20;animation-duration:48s}
  .burst.b3{opacity:.14;animation-duration:60s}
  @keyframes spin{to{transform:rotate(360deg)}}

  /* canvas do warp */
  #warp{
    position:fixed;inset:0;z-index:1;display:block;
    pointer-events:none; /* n√£o bloqueia o clique */
  }

  /* HUD / marca */
  .hud{position:fixed;inset:0;padding:20px;z-index:3;pointer-events:none;
       display:grid;grid-template-rows:auto 1fr auto;font-family:Orbitron,Inter,sans-serif}
  .brand{letter-spacing:.2ch;font-weight:800;opacity:.85;color:#cfe0ff;text-shadow:0 0 18px rgba(120,160,255,.35)}
  .foot{justify-self:center;align-self:end;opacity:.6;font:600 12px/1 Inter,system-ui}

  /* centro */
  .wrap{position:relative;z-index:4;height:100dvh;display:grid;place-items:center}

  .portal{position:relative;display:grid;place-items:center;width:min(70vmin,520px);aspect-ratio:1;border-radius:50%;isolation:isolate;pointer-events:none}
  .portal::before{ /* glow atr√°s do portal, sem pegar o bot√£o */
    content:"";position:absolute;inset:-16%;border-radius:50%;
    background:
      radial-gradient(closest-side, rgba(96,165,250,.40), rgba(59,130,246,.15) 60%, transparent 72%),
      conic-gradient(from 0deg, rgba(96,165,250,.50), rgba(59,130,246,.25), rgba(122,77,255,.18), rgba(96,165,250,.50));
    filter:blur(14px);opacity:.6;mix-blend-mode:screen;pointer-events:none;
    mask:radial-gradient(circle at 50% 50%, black 58%, transparent 63%);
  }
  .rings{
    position:absolute;inset:12%;border-radius:50%;
    background:radial-gradient(closest-side, rgba(255,255,255,.55), rgba(96,165,250,.22) 35%, transparent 65%);
    mask:radial-gradient(circle, transparent 40%, black 41%);
    filter:blur(6px);animation:pulse 2.2s ease-in-out infinite;mix-blend-mode:screen;pointer-events:none
  }
  @keyframes pulse{0%,100%{transform:scale(.985);opacity:.85}50%{transform:scale(1.03);opacity:1}}

  /* bot√£o ‚Äî clic√°vel e sem halo */
  .cta{
    --pad:clamp(14px,2.2vmin,22px);
    position:relative; z-index:5; pointer-events:auto;
    display:inline-flex; align-items:center; gap:.6ch;
    padding:var(--pad) calc(var(--pad)*1.6);
    border-radius:999px; border:1px solid var(--border);
    background:rgba(16,24,42,.62); background-clip:padding-box; mix-blend-mode:normal;
    color:var(--white); text-transform:uppercase; letter-spacing:.2ch;
    font:800 14px/1 Orbitron,Inter,sans-serif; cursor:pointer;
    box-shadow:inset 0 0 0 1px rgba(255,255,255,.08);
    transition:transform .16s ease, box-shadow .16s ease;
    backdrop-filter:blur(6px) saturate(140%);
  }
  .cta:hover{transform:translateY(-1px) scale(1.02);box-shadow:inset 0 0 0 1px rgba(255,255,255,.14),0 0 0 3px rgba(96,165,250,.14)}
  .cta:active{transform:translateY(0) scale(.98)}
  .cta::after{ /* glow controlado atr√°s do bot√£o (sem halo) */
    content:""; position:absolute; inset:-6px; z-index:-1; border-radius:inherit;
    background:radial-gradient(60% 120% at 50% 50%, rgba(96,165,250,.55), rgba(59,130,246,.35) 60%, transparent 70%);
    filter:blur(14px); opacity:.55; transition:opacity .2s ease;
  }
  .cta:hover::after{opacity:.8}

  /* resultado */
  .result{position:fixed;inset:0;display:grid;place-items:center;z-index:6;pointer-events:none;opacity:0}
  .card{
    pointer-events:auto;display:grid;grid-template-columns:180px 1fr;gap:20px;align-items:center;
    width:min(860px,92vw);padding:18px;border-radius:22px;border:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.04));
    backdrop-filter:blur(8px) saturate(160%); box-shadow:0 10px 40px rgba(0,20,60,.45);
  }
  .poster{width:100%;aspect-ratio:2/3;border-radius:16px;object-fit:cover;box-shadow:0 8px 30px rgba(0,0,0,.4)}
  .meta h2{margin:0 0 6px;font:800 22px/1.15 Orbitron,Inter,sans-serif;letter-spacing:.06ch}
  .meta .sub{opacity:.85;margin:2px 0 12px}
  .actions{display:flex;flex-wrap:wrap;gap:10px}
  .btn{padding:10px 14px;border-radius:12px;border:1px solid var(--border);
       background:linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.05));
       color:var(--white);font-weight:600;cursor:pointer;transition:transform .14s ease}
  .btn:hover{transform:translateY(-1px)} .btn:active{transform:translateY(0)}
  @media (max-width:720px){.card{grid-template-columns:1fr}}

  /* flash ao fim do warp */
  .flash{position:fixed;inset:0;pointer-events:none;z-index:5;opacity:0}
  .flash.show{animation:flash .35s ease-out}
  @keyframes flash{0%{opacity:0}10%{opacity:1}100%{opacity:0}}

  /* acessibilidade */
  @media (prefers-reduced-motion: reduce){
    .rings,.burst{animation:none}
    .cta{transition:none}
  }
</style>
</head>
<body>
  <div class="bursts" aria-hidden="true">
    <div class="burst b1"></div>
    <div class="burst b2"></div>
    <div class="burst b3"></div>
  </div>

  <canvas id="warp"></canvas>

  <div class="hud" aria-hidden="true">
    <div class="brand">WYWATCH ‚Ä¢ SURPRENDA-ME</div>
    <div></div>
    <div class="foot">Time-Machine Experience ‚Äî clique para saltar</div>
  </div>

  <div class="wrap">
    <div class="portal">
      <div class="rings"></div>
      <button id="go" class="cta">Surpreenda-me</button>
    </div>
  </div>

  <div id="result" class="result">
    <div class="card" id="card">
      <img id="poster" class="poster" alt="Poster">
      <div class="meta">
        <h2 id="title">T√≠tulo</h2>
        <div id="sub" class="sub">G√™nero ‚Ä¢ Ano ‚Ä¢ Dura√ß√£o</div>
        <p id="overview">Sinopse.</p>
        <div class="actions">
          <button class="btn" id="again">üîÅ Outro salto</button>
          <button class="btn" id="details">üìú Ver detalhes</button>
          <button class="btn" id="fav">‚ù§Ô∏è Favoritar</button>
        </div>
      </div>
    </div>
  </div>

  <div id="flash" class="flash"></div>

<script>
(() => {
  const canvas = document.getElementById('warp');
  const ctx = canvas.getContext('2d', { alpha: false });
  const btn = document.getElementById('go');
  const flash = document.getElementById('flash');
  const res = document.getElementById('result');
  const card = document.getElementById('card');

  // ===== Canvas setup =====
  let W=0,H=0,CX=0,CY=0,DPR=1;
  function resize(){
    DPR = Math.min(window.devicePixelRatio||1, 2) * 0.9; // poupa GPU/CPU
    W = canvas.width = Math.floor(innerWidth * DPR);
    H = canvas.height = Math.floor(innerHeight * DPR);
    canvas.style.width = '100%';
    canvas.style.height = '100%';
    CX = W/2; CY = H/2;
  }
  addEventListener('resize', resize, {passive:true}); resize();

  // ===== Part√≠culas (hiper-salto com "faixas") =====
  const STAR_MAX = 1200;              // total m√°ximo
  let STAR_COUNT = 0;                 // ajustado por tela
  let stars = [];
  const BASE_SPEED = 0.35;            // velocidade base
  let speedBoost = 1;                 // multiplicador animado
  let running = false, raf = 0, t0 = 0;
  const WARP_TIME = 1400;             // igual ao CSS

  function initStars(){
    STAR_COUNT = Math.min(STAR_MAX, Math.round((W*H) / (1100*DPR))); // denso q.b.
    stars = new Array(STAR_COUNT).fill(0).map(()=>spawn(true));
  }
  function spawn(center=false){
    const r = center ? (Math.random() * Math.min(W,H) * 0.06) : (Math.random() * Math.min(W,H) * 0.5);
    const a = Math.random() * Math.PI * 2;
    return {
      x: Math.cos(a) * r,
      y: Math.sin(a) * r,
      z: Math.random()*1 + 0.2,        // profundidade
      l: Math.random()*0.8 + 0.6,      // luminosidade
      w: Math.random()*1.1 + 0.6       // ‚Äúespessura‚Äù base
    };
  }
  initStars();

  function easeOutExpo(x){ return x===1 ? 1 : 1 - Math.pow(2, -10*x); }

  function frame(now){
    const prog = Math.min(1, (now - t0) / WARP_TIME);
    const boost = 1 + easeOutExpo(prog) * 24; // pico de velocidade
    speedBoost = boost;

    // fundo
    ctx.fillStyle = '#06080f';
    ctx.fillRect(0,0,W,H);

    // glow radial azulado
    const g = ctx.createRadialGradient(CX,CY,1,CX,CY,Math.max(CX,CY));
    g.addColorStop(0,'rgba(96,165,250,0.25)');
    g.addColorStop(1,'rgba(59,130,246,0)');
    ctx.fillStyle = g; ctx.fillRect(0,0,W,H);

    ctx.translate(CX,CY);

    // desenha linhas/‚Äúfaixas‚Äù como nos exemplos
    for (let i=0;i<STAR_COUNT;i++){
      const s = stars[i];
      const ang = Math.atan2(s.y, s.x);
      const v = (BASE_SPEED + s.z) * speedBoost;

      s.x += Math.cos(ang) * v;
      s.y += Math.sin(ang) * v;

      // se saiu muito, renasce perto do centro
      if (s.x*s.x + s.y*s.y > (W*W + H*H)){
        const n = spawn(true);
        s.x=n.x; s.y=n.y; s.z=n.z; s.l=n.l; s.w=n.w;
      }

      // comprimento e largura da trilha
      const trail = 6 + v * 1.2;                      // mais veloz ‚Üí mais longa
      const lw = (s.w + s.z*1.1) * DPR;               // largura base
      const x2 = s.x - Math.cos(ang)*trail;
      const y2 = s.y - Math.sin(ang)*trail;

      // gradiente para linha (branco->azul)
      const lg = ctx.createLinearGradient(s.x, s.y, x2, y2);
      lg.addColorStop(0, `rgba(255,255,255,${0.85*s.l})`);
      lg.addColorStop(1, `rgba(96,165,250,${0.65*s.l})`);
      ctx.strokeStyle = lg;
      ctx.lineWidth = lw;
      ctx.beginPath();
      ctx.moveTo(s.x, s.y);
      ctx.lineTo(x2, y2);
      ctx.stroke();
    }
    ctx.setTransform(1,0,0,1,0,0);

    if (prog < 1) { raf = requestAnimationFrame(frame); }
    else { running = false; flashOnce(); onWarpEnd(); }
  }

  function startWarp(){
    if (running || window.matchMedia('(prefers-reduced-motion: reduce)').matches){ onWarpEnd(); return; }
    running = true; t0 = performance.now();
    cancelAnimationFrame(raf); raf = requestAnimationFrame(frame);
  }

  // ===== Flash branco curto ao final =====
  function flashOnce(){
    flash.classList.remove('show'); void flash.offsetWidth; // reset
    flash.classList.add('show');
  }

  // ===== Resultado mock (troque por sua API) =====
  const sample=[
    { title:'Ex Machina', sub:'Fic√ß√£o cient√≠fica ‚Ä¢ 2015 ‚Ä¢ 1h48', poster:'https://image.tmdb.org/t/p/w500/DMoKk4ZCkxzgv2Fne5DE5FCDJMm.jpg', overview:'Um programador participa de um experimento com uma IA avan√ßada.' },
    { title:'Blade Runner 2049', sub:'Fic√ß√£o cient√≠fica ‚Ä¢ 2017 ‚Ä¢ 2h44', poster:'https://image.tmdb.org/t/p/w500/aMPkE7uWJtGhqy5MzZY1ja2G4bC.jpg', overview:'Um segredo leva K a buscar Rick Deckard, desaparecido h√° 30 anos.' },
    { title:'TRON: O Legado', sub:'Fic√ß√£o cient√≠fica ‚Ä¢ 2010 ‚Ä¢ 2h05', poster:'https://image.tmdb.org/t/p/w500/5cIUvCJQ2aNPXRCmXiOIuJJxIki.jpg', overview:'Sam √© transportado para um universo digital e precisa encontrar seu pai.' },
    { title:'A Chegada', sub:'Fic√ß√£o cient√≠fica ‚Ä¢ 2016 ‚Ä¢ 1h56', poster:'https://image.tmdb.org/t/p/w500/x2FJsf1ElAgr63Y3PNPtJRcPoeJ.jpg', overview:'Linguista tenta se comunicar com visitantes de doze naves alien√≠genas.' }
  ];
  const elPoster = document.getElementById('poster');
  const elTitle = document.getElementById('title');
  const elSub = document.getElementById('sub');
  const elOverview = document.getElementById('overview');

  function setResult(d){
    elPoster.src = d.poster; elPoster.alt = 'Poster ‚Äî ' + d.title;
    elTitle.textContent = d.title; elSub.textContent = d.sub; elOverview.textContent = d.overview;
  }

  function showResult(){
    res.style.opacity = 1; res.style.pointerEvents = 'auto';
    card.animate([
      { transform:'translateY(30px) scale(.96)', opacity:0 },
      { transform:'translateY(0) scale(1)', opacity:1 }
    ], { duration:520, easing:'cubic-bezier(.2,.8,.2,1)', fill:'both' });
  }
  function hideResult(){
    const a = card.animate([{opacity:1,transform:'none'},{opacity:0,transform:'translateY(20px)'}],
                           {duration:260,easing:'ease',fill:'forwards'});
    a.onfinish = () => { res.style.opacity = 0; res.style.pointerEvents = 'none'; };
  }

  async function onWarpEnd(){
    // aqui voc√™ pode chamar sua API real:
    // const pick = await fetch('/api/surpreenda').then(r=>r.json());
    const pick = sample[Math.random()*sample.length|0];
    setResult(pick);
    showResult();
    btn.disabled = false;
  }

  // ===== Eventos =====
  btn.addEventListener('click', () => { btn.disabled = true; hideResult(); startWarp(); if(navigator.vibrate) navigator.vibrate(18); });
  document.getElementById('again').addEventListener('click', () => { hideResult(); setTimeout(()=>btn.click(), 280); });
  document.getElementById('details').addEventListener('click', () => alert('Abrir detalhes ‚Äî integre a rota.'));
  document.getElementById('fav').addEventListener('click', () => alert('Favoritado! (mock)'));

  // acessibilidade: Enter/Space no bot√£o j√° funcionam nativamente
})();
</script>
</body>
</html>
